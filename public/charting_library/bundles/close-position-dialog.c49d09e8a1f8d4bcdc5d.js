(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[2075],{548463:e=>{e.exports={scrollable:"scrollable-bq1QRy9X",content:"content-bq1QRy9X",input:"input-bq1QRy9X",endSlot:"endSlot-bq1QRy9X",message:"message-bq1QRy9X",estimation:"estimation-bq1QRy9X",label:"label-bq1QRy9X",divider:"divider-bq1QRy9X",disclaimer:"disclaimer-bq1QRy9X",disclaimerLink:"disclaimerLink-bq1QRy9X",spinnerContainer:"spinnerContainer-bq1QRy9X"}},514375:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ClosePositionDialog:()=>y});var l=n(609838),o=n(50959),i=n(302946),a=n(960521),s=n(742554),r=n(370981),u=n(180185);const c=()=>{const[e,t]=(0,o.useState)(!window.navigator.onLine),n=e=>t("offline"===e.type);return(0,o.useEffect)((()=>(window.addEventListener("online",n),window.addEventListener("offline",n),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}))),e};var d=n(587125),m=n(906991),p=n(760775),v=n(548463);l.t(null,void 0,n(944968));function y(e){const{isPartialCloseSupported:t,positionOrIndividualPosition:y,qtyFormatter:b,supportLots:f,qtyLabel:g,qtyStep:S,uiQtyStep:w,minQty:C,message:q,onClose:E,dialogActionHandler:Q,onOpen:h,isPreviewClosePositionSupported:R,previewClosePosition:L}=e,X=(0,o.useMemo)((()=>Math.abs(y.qty)),[y.qty]),[k,N]=((0,o.useRef)(!0),(0,o.useState)(!0)),[x,D]=(0,o.useState)(!1),[P,O]=(0,o.useState)(X),[B,_]=(0,o.useState)(!1),[M,A]=(0,o.useState)(!1),[F,T]=(0,o.useState)(),[z,H]=(0,o.useState)(null),[I,K]=(0,o.useState)(!1),[$,V]=(0,o.useState)(!1),j=c(),G=!M&&null!==P&&P<X;(0,o.useEffect)((()=>{let e;const t=new a.Big(X),o=null!==P?new a.Big(P):null,i=o?.minus(C).mod(S);null===o?e=l.t(null,void 0,n(784830)):o.gt(t)?e=l.t(null,void 0,n(917138)):!o.eq(t)&&o.lt(C)?e=l.t(null,void 0,n(364144)).replace("{minQty}",String(C)):!o.eq(t)&&t.minus(o).lt(C)?e=l.t(null,void 0,n(979841)).replace("{minQty}",String(C)):o.eq(t)||i?.eq(0)||(e=l.t(null,void 0,n(568556)).replace("{step}",String(S))),A(B||void 0!==e),T(e)}),[B,P,X,S,C]),(0,o.useEffect)((()=>{j&&Z()}),[j,Z]);const J=(0,o.useMemo)((()=>null!==P?b.format(P):""),[P,b]),U=(0,o.useMemo)((()=>null!==P?b.format(new a.Big(X).minus(P).toNumber()):""),[P,X,b]),W=x&&null!==P&&P<X?l.t(null,void 0,n(330285)):l.t(null,void 0,n(383236));return o.createElement(m.CreateConfirmDialog,{isOpen:k,isOpened:k,submitButtonDisabled:x&&M,render:function(){const e=b.format(X),a=l.t(null,{context:"close_position_total",plural:"of {positionQty} lots",count:X},n(828781)).replace("{positionQty}",e),r=l.t(null,{context:"close_position_total",plural:"of {positionQty} units",count:X},n(655511)).replace("{positionQty}",e),u=l.t(null,{context:"close_position_total",plural:"of {positionQty}",count:X},n(608478)).replace("{positionQty}",`${e} ${g}`);let c=r;f&&(c=a);g&&(c=u);return o.createElement(s.TouchScrollContainer,{className:v.scrollable,onScroll:oe},o.createElement("div",{className:v.content},o.createElement("div",{className:v.message},q),t&&o.createElement(i.Checkbox,{name:"partially-close-checkbox",label:o.createElement("span",{className:v.label
},l.t(null,void 0,n(219375))),checked:x,onChange:Y,disabled:!1,indeterminate:!1,labelPositionReverse:!1}),x&&o.createElement("form",{onSubmit:ee},o.createElement(d.NumberInput,{error:M,errorMessage:F,errorHandler:le,className:v.input,value:(0,p.applyRounding)(P,b),forceShowControls:!0,min:C,step:S,uiStep:w,onValueChange:te,onEmptyString:ne,endSlot:o.createElement("p",{className:v.endSlot},c),useFormatter:!1}),G&&o.createElement("div",{className:v.estimation},o.createElement("div",null,l.t(null,void 0,n(718806)).replace("{symbol}",y.symbol).replace("{quantity}",J)),o.createElement("div",null,l.t(null,void 0,n(353876)).replace("{leavingQty}",U)))),!1))},onClose:Z,title:l.t(null,void 0,n(383236)),onSubmit:ee,onCancel:()=>{},onKeyDown:function(e){27===(0,u.hashFromEvent)(e)&&Z()},dataName:"trading-partial-closing-dialog",backdrop:!1,submitOnEnterKey:!0,defaultActionOnClose:"none",submitButtonText:W,cancelButtonText:l.t(null,void 0,n(904543)),onOpen:h});function Y(){D((e=>!e))}function Z(){N(!1),Q({status:!1}),E()}function ee(){Q(t&&x?null===P||M?{status:!1}:{status:!0,qty:P,id:z?.id}:{status:!0,id:z?.id}),N(!1),E()}function te(e){O(e)}function ne(){O(null)}function le(e){_(e)}function oe(){r.globalCloseDelegate.fire()}}},906991:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>a});var l=n(50959),o=n(997776);const i=l.lazy((async()=>({default:(await Promise.all([n.e(7172),n.e(8894),n.e(5743),n.e(4495),n.e(9487),n.e(9323),n.e(159),n.e(683),n.e(1144),n.e(775),n.e(9658),n.e(7882),n.e(4952),n.e(5789),n.e(3905),n.e(3566)]).then(n.bind(n,976669))).AdaptiveConfirmDialog}))),a=(0,o.withDialogLazyLoad)(i)}}]);