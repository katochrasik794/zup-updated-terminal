(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[4862,3285,9937,4579],{497754:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var r=s.apply(null,n);r&&e.push(r)}else if("object"===i)for(var a in n)o.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},138672:e=>{e.exports={"nav-button":"nav-button-znwuaSC1",link:"link-znwuaSC1",background:"background-znwuaSC1",icon:"icon-znwuaSC1","flip-icon":"flip-icon-znwuaSC1","size-large":"size-large-znwuaSC1","preserve-paddings":"preserve-paddings-znwuaSC1","size-medium":"size-medium-znwuaSC1","size-small":"size-small-znwuaSC1","size-xsmall":"size-xsmall-znwuaSC1","size-xxsmall":"size-xxsmall-znwuaSC1","visually-hidden":"visually-hidden-znwuaSC1"}},241427:e=>{e.exports={dialog:"dialog-aRAWUDhF",rounded:"rounded-aRAWUDhF",shadowed:"shadowed-aRAWUDhF",fullscreen:"fullscreen-aRAWUDhF",darker:"darker-aRAWUDhF",backdrop:"backdrop-aRAWUDhF"}},251284:e=>{e.exports={"tablet-normal-breakpoint":"(max-width: 768px)","small-height-breakpoint":"(max-height: 360px)","tablet-small-breakpoint":"(max-width: 440px)"}},772908:e=>{e.exports={dialog:"dialog-b8SxMnzX",wrapper:"wrapper-b8SxMnzX",separator:"separator-b8SxMnzX",bounded:"bounded-b8SxMnzX"}},174714:e=>{e.exports={"small-height-breakpoint":"(max-height: 360px)",container:"container-BZKENkhT",unsetAlign:"unsetAlign-BZKENkhT",title:"title-BZKENkhT",subtitle:"subtitle-BZKENkhT",textWrap:"textWrap-BZKENkhT",ellipsis:"ellipsis-BZKENkhT",close:"close-BZKENkhT",icon:"icon-BZKENkhT"}},85529:e=>{e.exports={dialog:"dialog-VUnQLSMH",buttons:"buttons-VUnQLSMH",button:"button-VUnQLSMH",disabled:"disabled-VUnQLSMH"}},947156:e=>{e.exports={"tablet-normal-breakpoint":"(max-width: 768px)","tooltip-offset":"20px",dialog:"dialog-qyCw0PaN",dragging:"dragging-qyCw0PaN",mobile:"mobile-qyCw0PaN",fullscreen:"fullscreen-qyCw0PaN",dialogAnimatedAppearance:"dialogAnimatedAppearance-qyCw0PaN",dialogAnimation:"dialogAnimation-qyCw0PaN",dialogTooltip:"dialogTooltip-qyCw0PaN"}},205808:e=>{e.exports={menuWrap:"menuWrap-Kq3ruQo8",isMeasuring:"isMeasuring-Kq3ruQo8",scrollWrap:"scrollWrap-Kq3ruQo8",momentumBased:"momentumBased-Kq3ruQo8",menuBox:"menuBox-Kq3ruQo8",isHidden:"isHidden-Kq3ruQo8"}},315015:e=>{e.exports={separator:"separator-Pf4rIzEt"}},201290:(e,t,n)=>{"use strict";n.d(t,{AppContext:()=>o});const o=(0,n(50959).createContext)({isOnMobileAppPage:()=>!1,isRtl:!1,locale:"en",renderMode:"legacy"})},389986:(e,t,n)=>{"use strict";n.d(t,{CloseButton:()=>v});var o=n(50959),s=n(270762),i=n(117105),r=n.n(i),a=n(315130),l=n.n(a),c=n(238822),u=n.n(c),d=n(663346),h=n.n(d),p=n(534983),m=n.n(p);function g(e="large"){switch(e){case"large":return r();case"medium":default:return l();case"small":return u();case"xsmall":return h();case"xxsmall":return m()}}
const v=o.forwardRef(((e,t)=>o.createElement(s.NavButton,{...e,ref:t,icon:g(e.size)})))},270762:(e,t,n)=>{"use strict";n.d(t,{NavButton:()=>d});var o=n(50959),s=n(497754),i=n.n(s),r=n(878112),a=(n(15378),n(138672)),l=n.n(a);function c(e){const{size:t="large",preservePaddings:n,isLink:o,flipIconOnRtl:s,className:r}=e;return i()(l()["nav-button"],l()[`size-${t}`],n&&l()["preserve-paddings"],s&&l()["flip-icon"],o&&l().link,r)}function u(e){const{children:t,icon:n}=e;return o.createElement(o.Fragment,null,o.createElement("span",{className:l().background}),o.createElement(r.Icon,{icon:n,className:l().icon,"aria-hidden":!0}),t&&o.createElement("span",{className:l()["visually-hidden"]},t))}const d=(0,o.forwardRef)(((e,t)=>{const{icon:n,type:s="button",preservePaddings:i,flipIconOnRtl:r,size:a,"aria-label":l,...d}=e;return o.createElement("button",{...d,className:c({...e,children:l}),ref:t,type:s},o.createElement(u,{icon:n},l))}));d.displayName="NavButton";var h=n(591365),p=n(273388);(0,o.forwardRef)(((e,t)=>{const{icon:n,renderComponent:s,"aria-label":i,...r}=e,a=s??h.CustomComponentDefaultLink;return o.createElement(a,{...r,className:c({...e,children:i,isLink:!0}),reference:(0,p.isomorphicRef)(t)},o.createElement(u,{icon:n},i))})).displayName="NavAnchorButton"},15378:(e,t,n)=>{"use strict";var o,s,i,r;!function(e){e.Primary="primary",e.QuietPrimary="quiet-primary",e.Secondary="secondary",e.Ghost="ghost"}(o||(o={})),function(e){e.XXSmall="xxsmall",e.XSmall="xsmall",e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="xlarge",e.XXLarge="xxlarge"}(s||(s={})),function(e){e.Brand="brand",e.Blue="blue",e.Gray="gray",e.LightGray="light-gray",e.Green="green",e.Red="red",e.Black="black",e.Gradient="gradient",e.BlackFriday="black-friday",e.CyberMonday="cyber-monday",e.Coupon="coupon",e.Offer="offer",e.Space="space"}(i||(i={})),function(e){e.Semibold18px="semibold18px",e.Semibold16px="semibold16px",e.Semibold14px="semibold14px",e.Medium16px="medium16px",e.Regular16px="regular16px",e.Regular14px="regular14px",e.Regular12px="regular12px"}(r||(r={}))},409245:(e,t,n)=>{"use strict";function o(e){const{reference:t,...n}=e;return{...n,ref:t}}n.d(t,{renameRef:()=>o})},591365:(e,t,n)=>{"use strict";n.d(t,{CustomComponentDefaultLink:()=>i});var o=n(50959),s=n(409245);function i(e){return o.createElement("a",{...(0,s.renameRef)(e)})}o.PureComponent},80137:(e,t,n)=>{"use strict";n.d(t,{Dialog:()=>d});var o=n(50959),s=n(497754),i=n.n(s),r=n(682925),a=n(801808),l=n(800417),c=n(241427),u=n.n(c);class d extends o.PureComponent{constructor(){super(...arguments),this._manager=new a.OverlapManager,this._handleSlot=e=>{this._manager.setContainer(e)}}render(){const{rounded:e=!0,shadowed:t=!0,fullscreen:n=!1,darker:s=!1,className:a,backdrop:c,containerTabIndex:d=-1}=this.props,h=i()(a,u().dialog,e&&u().rounded,t&&u().shadowed,n&&u().fullscreen,s&&u().darker),p=(0,l.filterDataProps)(this.props),m=this.props.style?{...this._createStyles(),...this.props.style}:this._createStyles()
;return o.createElement(o.Fragment,null,o.createElement(r.SlotContext.Provider,{value:this._manager},c&&o.createElement("div",{onClick:this.props.onClickBackdrop,className:u().backdrop}),o.createElement("div",{...p,className:h,style:m,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:d,"aria-label":this.props.containerAriaLabel},this.props.children)),o.createElement(r.Slot,{reference:this._handleSlot}))}_createStyles(){const{bottom:e,left:t,width:n,right:o,top:s,zIndex:i,height:r}=this.props;return{bottom:e,left:t,right:o,top:s,zIndex:i,maxWidth:n,height:r}}}},718736:(e,t,n)=>{"use strict";n.d(t,{useFunctionalRefObject:()=>i});var o=n(50959),s=n(855393);function i(e){const t=(0,o.useMemo)((()=>function(e){const t=n=>{e(n),t.current=n};return t.current=null,t}((e=>{a.current(e)}))),[]),n=(0,o.useRef)(null),i=t=>{if(null===t)return r(n.current,t),void(n.current=null);n.current!==e&&(n.current=e,r(n.current,t))},a=(0,o.useRef)(i);return a.current=i,(0,s.useIsomorphicLayoutEffect)((()=>{if(null!==t.current)return a.current(t.current),()=>a.current(null)}),[e]),t}function r(e,t){null!==e&&("function"==typeof e?e(t):e.current=t)}},975228:(e,t,n)=>{"use strict";n.d(t,{hoverMouseEventFilter:()=>r,useAccurateHover:()=>a,useHover:()=>s,useHoverDeprecated:()=>i});var o=n(50959);function s(){const[e,t]=(0,o.useState)(!1);return[e,{onMouseEnter:function(e){t(!0)},onMouseLeave:function(e){t(!1)}}]}function i(){const[e,t]=(0,o.useState)(!1);return[e,{onMouseOver:function(e){r(e)&&t(!0)},onMouseOut:function(e){r(e)&&t(!1)}}]}function r(e){return!e.currentTarget.contains(e.relatedTarget)}function a(e){const[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const t=t=>{if(null===e.current)return;const o=e.current.contains(t.target);n(o)};return document.addEventListener("mouseover",t),()=>document.removeEventListener("mouseover",t)}),[]),t}},252130:(e,t,n)=>{"use strict";n.d(t,{useIsMounted:()=>s});var o=n(50959);const s=()=>{const e=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},855393:(e,t,n)=>{"use strict";n.d(t,{useIsomorphicLayoutEffect:()=>s});var o=n(50959);function s(e,t){("undefined"==typeof window?o.useEffect:o.useLayoutEffect)(e,t)}},778199:(e,t,n)=>{"use strict";function o(e,t,n,o,s){function i(s){if(e>s.timeStamp)return;const i=s.target;void 0!==n&&null!==t&&null!==i&&i.ownerDocument===o&&(t.contains(i)||n(s))}return s.click&&o.addEventListener("click",i,!1),s.mouseDown&&o.addEventListener("mousedown",i,!1),s.touchEnd&&o.addEventListener("touchend",i,!1),s.touchStart&&o.addEventListener("touchstart",i,!1),()=>{o.removeEventListener("click",i,!1),o.removeEventListener("mousedown",i,!1),o.removeEventListener("touchend",i,!1),o.removeEventListener("touchstart",i,!1)}}n.d(t,{addOutsideEventListener:()=>o})},908783:(e,t,n)=>{"use strict";n.d(t,{useOutsideEvent:()=>r});var o=n(50959),s=n(855393),i=n(778199);function r(e){
const{click:t,mouseDown:n,touchEnd:r,touchStart:a,handler:l,reference:c}=e,u=(0,o.useRef)(null),d=(0,o.useRef)("undefined"==typeof window?0:new window.CustomEvent("timestamp").timeStamp);return(0,s.useIsomorphicLayoutEffect)((()=>{const e={click:t,mouseDown:n,touchEnd:r,touchStart:a},o=c?c.current:u.current;return(0,i.addOutsideEventListener)(d.current,o,l,document,e)}),[t,n,r,a,l]),c||u}},664332:(e,t,n)=>{"use strict";n.d(t,{useResizeObserver:()=>r});var o=n(50959),s=n(855393),i=n(718736);function r(e,t=[]){const{callback:n,ref:r=null}=function(e){return"function"==typeof e?{callback:e}:e}(e),a=(0,o.useRef)(null),l=(0,o.useRef)(n);l.current=n;const c=(0,i.useFunctionalRefObject)(r),u=(0,o.useCallback)((e=>{c(e),null!==a.current&&(a.current.disconnect(),null!==e&&a.current.observe(e))}),[c,a]);return(0,s.useIsomorphicLayoutEffect)((()=>(a.current=new ResizeObserver(((e,t)=>{l.current(e,t)})),c.current&&u(c.current),()=>{a.current?.disconnect()})),[c,...t]),u}},183787:(e,t,n)=>{"use strict";n.d(t,{Icon:()=>s});var o=n(50959);const s=o.forwardRef(((e,t)=>{const{icon:n="",title:s,ariaLabel:i,ariaLabelledby:r,ariaHidden:a,...l}=e,c=!!(s||i||r);return o.createElement("span",{role:"img",...l,ref:t,"aria-label":i,"aria-labelledby":r,"aria-hidden":a||!c,title:s,dangerouslySetInnerHTML:{__html:n}})}))},878112:(e,t,n)=>{"use strict";n.d(t,{Icon:()=>o.Icon});var o=n(183787)},823030:(e,t,n)=>{"use strict";n.d(t,{SubmenuContext:()=>s,SubmenuHandler:()=>i});var o=n(50959);const s=o.createContext(null);function i(e){const[t,n]=(0,o.useState)(null),i=(0,o.useRef)(null),r=(0,o.useRef)(new Map);return(0,o.useEffect)((()=>()=>{null!==i.current&&clearTimeout(i.current)}),[]),o.createElement(s.Provider,{value:{current:t,setCurrent:function(e){null!==i.current&&(clearTimeout(i.current),i.current=null);null===t?n(e):i.current=setTimeout((()=>{i.current=null,n(e)}),100)},registerSubmenu:function(e,t){return r.current.set(e,t),()=>{r.current.delete(e)}},isSubmenuNode:function(e){return Array.from(r.current.values()).some((t=>t(e)))}}},e.children)}},730654:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>c,PortalContext:()=>u});var o=n(50959),s=n(632227),i=n(925931),r=n(801808),a=n(481564),l=n(682925);class c extends o.PureComponent{constructor(){super(...arguments),this._uuid=(0,i.nanoid)()}componentWillUnmount(){this._manager().removeWindow(this._uuid)}render(){const e=this._manager().ensureWindow(this._uuid,this.props.layerOptions);e.style.top=this.props.top||"",e.style.bottom=this.props.bottom||"",e.style.left=this.props.left||"",e.style.right=this.props.right||"",e.style.pointerEvents=this.props.pointerEvents||"";const t=this.props.className;return t&&("string"==typeof t?e.classList.add(t):e.classList.add(...t)),this.props.shouldTrapFocus&&!e.hasAttribute(a.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(a.FOCUS_TRAP_DATA_ATTRIBUTE,"true"),this.props["aria-hidden"]&&e.setAttribute("aria-hidden","true"),s.createPortal(o.createElement(u.Provider,{value:this},this.props.children),e)}moveToTop(){this._manager().moveToTop(this._uuid)}_manager(){
return null===this.context?(0,r.getRootOverlapManager)():this.context}}c.contextType=l.SlotContext;const u=o.createContext(null)},682925:(e,t,n)=>{"use strict";n.d(t,{Slot:()=>s,SlotContext:()=>i});var o=n(50959);class s extends o.Component{shouldComponentUpdate(){return!1}render(){return o.createElement("div",{style:{position:"fixed",zIndex:150,left:0,top:0},ref:this.props.reference})}}const i=o.createContext(null)},273388:(e,t,n)=>{"use strict";function o(e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}function s(e){return o([e])}n.d(t,{isomorphicRef:()=>s,mergeRefs:()=>o})},738036:(e,t,n)=>{"use strict";n.d(t,{OutsideEvent:()=>s});var o=n(908783);function s(e){const{children:t,...n}=e;return t((0,o.useOutsideEvent)(n))}},801808:(e,t,n)=>{"use strict";n.d(t,{OverlapManager:()=>r,getRootOverlapManager:()=>l});var o=n(650151),s=n(481564);class i{constructor(){this._storage=[]}add(e){this._storage.push(e)}remove(e){this._storage=this._storage.filter((t=>e!==t))}has(e){return this._storage.includes(e)}getItems(){return this._storage}}class r{constructor(e=document){this._storage=new i,this._windows=new Map,this._index=0,this._document=e,this._container=e.createDocumentFragment()}setContainer(e){const t=this._container,n=null===e?this._document.createDocumentFragment():e;!function(e,t){Array.from(e.childNodes).forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&t.appendChild(e)}))}(t,n),this._container=n}registerWindow(e){this._storage.has(e)||this._storage.add(e)}ensureWindow(e,t={position:"fixed",direction:"normal"}){const n=this._windows.get(e);if(void 0!==n)return n;this.registerWindow(e);const o=this._document.createElement("div");if(o.style.position=t.position,o.style.zIndex=this._index.toString(),o.dataset.id=e,void 0!==t.index){const e=this._container.childNodes.length;if(t.index>=e)this._container.appendChild(o);else if(t.index<=0)this._container.insertBefore(o,this._container.firstChild);else{const e=this._container.childNodes[t.index];this._container.insertBefore(o,e)}}else"reverse"===t.direction?this._container.insertBefore(o,this._container.firstChild):this._container.appendChild(o);return this._windows.set(e,o),++this._index,o}unregisterWindow(e){this._storage.remove(e);const t=this._windows.get(e);void 0!==t&&(null!==t.parentElement&&t.parentElement.removeChild(t),this._windows.delete(e))}getZindex(e){const t=this.ensureWindow(e);return parseInt(t.style.zIndex||"0")}moveLastWindowToTop(){const e=this._storage.getItems(),t=e[e.length-1];t&&this.moveToTop(t)}moveToTop(e){if(this.getZindex(e)!==this._index){const t=this.ensureWindow(e);this._windows.forEach(((e,n)=>{e.hasAttribute(s.FOCUS_TRAP_DATA_ATTRIBUTE)&&e.setAttribute(s.FOCUS_TRAP_DATA_ATTRIBUTE,e===t?"true":"false")})),t.style.zIndex=(++this._index).toString()}}removeWindow(e){this.unregisterWindow(e)}}const a=new WeakMap;function l(e=document){const t=e.getElementById("overlap-manager-root");if(null!==t)return(0,o.ensureDefined)(a.get(t));{const t=new r(e),n=function(e){const t=e.createElement("div")
;return t.style.position="absolute",t.style.zIndex=150..toString(),t.style.top="0px",t.style.left="0px",t.id="overlap-manager-root",t.dataset.qaId="overlap-manager-root",t}(e);return a.set(n,t),t.setContainer(n),e.body.appendChild(n),t}}var c;!function(e){e[e.BaseZindex=150]="BaseZindex"}(c||(c={}))},269842:(e,t,n)=>{"use strict";function o(...e){return t=>{for(const n of e)void 0!==n&&n(t)}}n.d(t,{createSafeMulticastEventHandler:()=>o})},247465:(e,t,n)=>{"use strict";n.d(t,{isCancelled:()=>i,makeCancelable:()=>s});class o extends Error{constructor(){super("CancelToken")}}function s(e){let t=!1;return{promise:new Promise(((n,s)=>{e.then((e=>t?s(new o):n(e))),e.catch((e=>s(t?new o:e)))})),cancel(){t=!0}}}function i(e){return e instanceof o}},285089:(e,t,n)=>{"use strict";n.d(t,{setFixedBodyState:()=>l});var o=n(735922);const s=()=>!window.matchMedia("(min-width: 768px)").matches,i=()=>!window.matchMedia("(min-width: 1280px)").matches;let r=0,a=!1;function l(e){const{body:t}=document,n=t.querySelector(".widgetbar-wrap");if(e&&1==++r){const e=(0,o.getCSSProperty)(t,"overflow"),s=(0,o.getCSSPropertyNumericValue)(t,"padding-right");"hidden"!==e.toLowerCase()&&t.scrollHeight>t.offsetHeight&&((0,o.setStyle)(n,"right",`${(0,o.getScrollbarWidth)()}px`),t.style.paddingRight=`${s+(0,o.getScrollbarWidth)()}px`,a=!0),t.classList.add("i-no-scroll")}else if(!e&&r>0&&0==--r&&(t.classList.remove("i-no-scroll"),a)){(0,o.setStyle)(n,"right","0px");let e=0;e=n?(l=(0,o.getContentWidth)(n),s()?0:i()?45:Math.min(Math.max(l,45),450)):0,t.scrollHeight<=t.clientHeight&&(e-=(0,o.getScrollbarWidth)()),t.style.paddingRight=(e<0?0:e)+"px",a=!1}var l}},157129:(e,t,n)=>{"use strict";n.d(t,{createReactRoot:()=>d});var o=n(50959),s=n(632227),i=n(904237),r=n(201290),a=n(69111),l=n(229144);const c={iOs:"old",android:"new",old:"old",new:"new",any:"any"};function u(e){const[t]=(0,o.useState)({isOnMobileAppPage:e=>(0,a.isOnMobileAppPage)(c[e]),isRtl:(0,l.isRtl)(),locale:window.locale,renderMode:e.renderMode??"legacy"});return o.createElement(r.AppContext.Provider,{value:t},e.children)}function d(e,t,n="legacy"){const r=o.createElement(u,{renderMode:n},e);if("modern"===n){const e=(0,i.createRoot)(t);return e.render(r),{render(t){e.render(o.createElement(u,{renderMode:n},t))},unmount(){e.unmount()}}}return s.render(r,t),{render(e){s.render(o.createElement(u,{renderMode:n},e),t)},unmount(){s.unmountComponentAtNode(t)}}}},996038:(e,t,n)=>{"use strict";n.d(t,{DialogBreakpoints:()=>s});var o=n(251284);const s={SmallHeight:o["small-height-breakpoint"],TabletSmall:o["tablet-small-breakpoint"],TabletNormal:o["tablet-normal-breakpoint"]}},533408:(e,t,n)=>{"use strict";n.d(t,{AdaptivePopupDialog:()=>O});var o=n(50959),s=n(650151),i=n(497754),r=n.n(i),a=n(180185),l=n(229144),c=n(698043),u=n(714579),d=n(494707),h=n(996038),p=n(930052),m=n(910549);var g=n(206594),v=n(559410),f=n(609838),_=n(389986),b=n(190410),y=n(174714);function E(e){
const{titleId:t,title:s,titleTextWrap:i=!1,titleClassName:a,subtitle:l,showCloseIcon:c=!0,onClose:u,onCloseButtonKeyDown:d,renderBefore:h,renderAfter:p,draggable:m,className:g,unsetAlign:v,closeAriaLabel:E=f.t(null,void 0,n(47742)),closeButtonReference:w}=e,[S,x]=(0,o.useState)(!1);return o.createElement(b.DialogHeaderContext.Provider,{value:{setHideClose:x}},o.createElement("div",{className:r()(y.container,g,(l||v)&&y.unsetAlign)},h,o.createElement("div",{id:t,className:y.title,"data-dragg-area":m},o.createElement("div",{className:r()(i?y.textWrap:y.ellipsis,a)},s),l&&o.createElement("div",{className:r()(y.ellipsis,y.subtitle)},l)),p,c&&!S&&o.createElement(_.CloseButton,{className:y.close,"data-qa-id":"close","aria-label":E,onClick:u,onKeyDown:d,ref:w,size:"medium",preservePaddings:!0})))}var w=n(273388),S=n(800417),x=n(284170),C=n(534934),M=n(772908);const T={vertical:20},D={vertical:0};class O extends o.PureComponent{constructor(){super(...arguments),this._controller=null,this._reference=null,this._orientationMediaQuery=null,this._embedResizerOverridesEnabled=C.enabled("embed_resizer_overrides"),this._titleId=`title_${(0,x.randomHash)()}`,this._renderChildren=(e,t)=>(this._controller=e,this.props.render({requestResize:this._requestResize,centerAndFit:this._centerAndFit,isSmallWidth:t})),this._handleReference=e=>this._reference=e,this._handleCloseBtnClick=()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleClose()},this._handleClose=()=>{this.props.onClose()},this._handleOpen=()=>{void 0!==this.props.onOpen&&this.props.isOpened&&this.props.onOpen(this.props.fullScreen||window.matchMedia(h.DialogBreakpoints.TabletSmall).matches)},this._handleKeyDown=e=>{if(!e.defaultPrevented){if(this.props.onKeyDown&&this.props.onKeyDown(e),27===(0,a.hashFromEvent)(e)){if(e.defaultPrevented)return;if(this.props.forceCloseOnEsc&&this.props.forceCloseOnEsc())return this.props.onKeyboardClose&&this.props.onKeyboardClose(),void this._handleClose();const{activeElement:n}=document;if(null!==n){if(e.preventDefault(),"true"===(t=n).getAttribute("data-haspopup")&&"true"!==t.getAttribute("data-expanded"))return void this._handleClose();const o=this._reference;if(null!==o&&(0,c.isTextEditingField)(n))return void o.focus();if(o?.contains(n))return this.props.onKeyboardClose&&this.props.onKeyboardClose(),void this._handleClose()}}var t,n;(function(e){if("function"==typeof e)return e();return Boolean(e)})(this.props.disableTabNavigationContainment)||(n=e,[9,a.Modifiers.Shift+9].includes((0,a.hashFromEvent)(n))&&n.stopPropagation())}},this._requestResize=()=>{null!==this._controller&&this._controller.recalculateBounds()},this._centerAndFit=()=>{null!==this._controller&&this._controller.centerAndFit()},this._calculatePositionWithOffsets=(e,t)=>{const n=(0,s.ensureDefined)(this.props.fullScreenViewOffsets).value();return{top:n.top,left:(0,l.isRtl)()?-n.right:n.left,width:t.clientWidth-n.left-n.right,height:t.clientHeight-n.top-n.bottom}}}componentDidMount(){
this.props.ignoreClosePopupsAndDialog||v.subscribe(g.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null),this._handleOpen(),void 0!==this.props.onOpen&&(this._orientationMediaQuery=window.matchMedia("(orientation: portrait)"),this._orientationMediaQuery.addEventListener("change",this._handleOpen)),this.props.fullScreenViewOffsets&&this.props.fullScreen&&this.props.fullScreenViewOffsets.subscribe(this._requestResize);const{backdrop:e,draggable:t=!e,centerOnResize:n=!t}=this.props;n&&window.addEventListener("resize",this._centerAndFit)}componentWillUnmount(){this.props.ignoreClosePopupsAndDialog||v.unsubscribe(g.CLOSE_POPUPS_AND_DIALOGS_COMMAND,this._handleClose,null),null!==this._orientationMediaQuery&&this._orientationMediaQuery.removeEventListener("change",this._handleOpen),this.props.fullScreenViewOffsets&&this.props.fullScreen&&this.props.fullScreenViewOffsets.unsubscribe(this._requestResize),window.removeEventListener("resize",this._centerAndFit)}focus(){(0,s.ensureNotNull)(this._reference).focus()}getElement(){return this._reference}contains(e){return this._reference?.contains(e)??!1}render(){const{className:e,wrapperClassName:t,headerClassName:n,isOpened:s,title:i,titleTextWrap:a,titleClassName:l,dataName:c,dataQaId:g,onClickOutside:v,onClickBackdrop:f,additionalElementPos:_,additionalHeaderElement:b,backdrop:y,shouldForceFocus:x=!0,shouldReturnFocus:C,onForceFocus:O,showSeparator:N,subtitle:R,draggable:k=!y,fullScreen:A=!1,showCloseIcon:P=!0,rounded:L=!0,isAnimationEnabled:F,growPoint:I,dialogTooltip:B,unsetHeaderAlign:W,onDragStart:z,dataDialogName:H,closeAriaLabel:U,containerAriaLabel:q,reference:Q,containerTabIndex:K,closeButtonReference:G,onCloseButtonKeyDown:V,shadowed:X,fullScreenViewOffsets:$,onClick:Y}=this.props,j=this.props.fixedBody??(!!y||void 0),Z="after"!==_?b:void 0,J="after"===_?b:void 0,ee="string"==typeof i?i:H||"",te=(0,S.filterDataProps)(this.props),ne=(0,w.mergeRefs)([this._handleReference,Q]);return o.createElement(p.MatchMedia,{rule:h.DialogBreakpoints.SmallHeight},(_=>o.createElement(p.MatchMedia,{rule:h.DialogBreakpoints.TabletSmall},(h=>o.createElement(u.PopupDialog,{rounded:!(h||A)&&L,className:r()(M.dialog,A&&$&&M.bounded,e),isOpened:s,reference:ne,onKeyDown:this._handleKeyDown,onClickOutside:v,onClickBackdrop:f??v,fullscreen:h||A,guard:_?D:T,boundByScreen:h||A,shouldForceFocus:x,onForceFocus:O,shouldReturnFocus:C,backdrop:y,draggable:k,isAnimationEnabled:F,growPoint:I,name:this.props.dataName,dialogTooltip:B,onDragStart:z,containerAriaLabel:q,containerTabIndex:K,calculateDialogPosition:A&&$?this._calculatePositionWithOffsets:void 0,shadowed:X,fixedBody:j,onClick:Y,...te},o.createElement("div",{role:"dialog","aria-labelledby":void 0!==i?this._titleId:void 0,className:r()(M.wrapper,t),"data-name":c,"data-qa-id":g,"data-dialog-name":ee},void 0!==i&&o.createElement(E,{draggable:k&&!(h||A),onClose:this._handleCloseBtnClick,renderAfter:J,renderBefore:Z,subtitle:R,title:i,titleId:this._titleId,titleTextWrap:a,showCloseIcon:P,className:n,titleClassName:l,unsetAlign:W,closeAriaLabel:U,
closeButtonReference:G,onCloseButtonKeyDown:V}),N&&o.createElement(d.Separator,{className:M.separator}),o.createElement(m.PopupContext.Consumer,null,(e=>this._renderChildren(e,h||A)))))))))}}},190410:(e,t,n)=>{"use strict";n.d(t,{DialogHeaderContext:()=>o});const o=n(50959).createContext({setHideClose:()=>{}})},865266:(e,t,n)=>{"use strict";n.d(t,{useRovingTabindexElement:()=>r});var o=n(50959),s=n(718736),i=n(855393);function r(e,t=[]){const[n,r]=(0,o.useState)(!1),a=(0,s.useFunctionalRefObject)(e);return(0,i.useIsomorphicLayoutEffect)((()=>{const e=a.current;if(null===e)return;const t=e=>{switch(e.type){case"roving-tabindex:main-element":r(!0);break;case"roving-tabindex:secondary-element":r(!1)}};return e.addEventListener("roving-tabindex:main-element",t),e.addEventListener("roving-tabindex:secondary-element",t),()=>{e.removeEventListener("roving-tabindex:main-element",t),e.removeEventListener("roving-tabindex:secondary-element",t)}}),t),[a,n?0:-1]}},134388:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ObjectTreeDialogRenderer:()=>C});var o=n(50959),s=n(707986),i=n(609838),r=n(497754),a=n(813550),l=n(252130),c=n(930052),u=n(533408),d=n(996038),h=n(993321),p=n(420779),m=n(535842),g=n(935919),v=n(80465),f=n(85529);function _(e){const{viewModel:t,onClose:s,activeChartWidget:h}=e,[p,m]=(0,o.useState)(!1),[_,y]=(0,o.useState)(!1),[E,w]=(0,o.useState)(!1),S=(0,o.useRef)(null),x=(0,a.useForceUpdate)(),C=((0,l.useIsMounted)(),t.selection()),M=t.canSelectionBeGrouped();return(0,o.useEffect)((()=>{const e=window.matchMedia(d.DialogBreakpoints.TabletSmall);return e.addEventListener("change",T),()=>e.removeEventListener("change",T)}),[]),(0,o.useEffect)((()=>(C.onChange().subscribe(null,(()=>x())),()=>{C.onChange().unsubscribeAll(null)})),[C]),(0,o.useEffect)((()=>{const e=e=>w(e);return t.isContextMenuOpened().subscribe(e),()=>{t.isContextMenuOpened().unsubscribe(e)}}),[t]),o.createElement(o.Fragment,null,o.createElement(c.MatchMedia,{rule:d.DialogBreakpoints.TabletSmall},(e=>o.createElement(u.AdaptivePopupDialog,{additionalElementPos:"after",additionalHeaderElement:o.createElement("div",{className:f.buttons},o.createElement(g.ToolWidgetIconButton,{className:r(f.button,!M&&f.disabled),icon:v,onClick:D,isDisabled:!M,title:i.t(null,void 0,n(183390)),"data-name":"group-button"}),!1),className:f.dialog,dataName:"object-tree-dialog",isOpened:!0,onClickOutside:_||e||E?()=>{}:s,onClose:s,ref:S,render:()=>o.createElement(b,{isSmallTablet:e,viewModel:t}),title:i.t(null,void 0,n(888616)),showSeparator:!0}))),!1);function T(){p&&!window.matchMedia(d.DialogBreakpoints.TabletSmall).matches&&m(!1)}function D(){t.createGroupFromSelection()}}function b(e){const{isSmallTablet:t,viewModel:n}=e,s=(0,o.useMemo)((()=>({size:t?1:0,smallSizeTreeNodeAction:0})),[t]);return o.createElement(m.SizeContext.Provider,{value:s},o.createElement(h.ObjectTree,{nodeRenderer:p.NodeRenderer,showHeader:!1,viewModel:n,isDialog:!0}))}var y=n(33290),E=n(210118),w=n(535710),S=n(483394),x=n(157129);class C extends S.DialogRenderer{constructor(){super(),this._handleClose=()=>{
this._rootInstance?.unmount(),this._setVisibility(!1),null!==this._viewModel&&(this._viewModel.destroy(),this._viewModel=null)};const e=(0,y.service)(E.CHART_WIDGET_COLLECTION_SERVICE);this._activeChartWidget=e.activeChartWidget.value(),this._viewModel=new w.ObjectTree(e.activeChartWidget)}hide(){this._handleClose()}isVisible(){return this.visible().value()}show(){this.isVisible()||(0,s.loadAllSourcesIcons)().then((()=>{null!==this._viewModel&&(this._rootInstance=(0,x.createReactRoot)(o.createElement(_,{onClose:this._handleClose,viewModel:this._viewModel,activeChartWidget:this._activeChartWidget}),this._container),this._setVisibility(!0))}))}}},910549:(e,t,n)=>{"use strict";n.d(t,{PopupContext:()=>o});const o=n(50959).createContext(null)},714579:(e,t,n)=>{"use strict";n.d(t,{PopupDialog:()=>R});var o,s=n(50959),i=n(497754),r=n(650151),a=n(80137),l=n(874485),c=n(738036),u=n(825850),d=n(32556);function h(e,t,n,o){return e+t>o&&(e=o-t),e<n&&(e=n),e}function p(e){return{x:(0,u.clamp)(e.x,20,document.documentElement.clientWidth-20),y:(0,u.clamp)(e.y,20,window.innerHeight-20)}}function m(e){return{x:e.clientX,y:e.clientY}}function g(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}}!function(e){e[e.MouseGuardZone=20]="MouseGuardZone"}(o||(o={}));class v{constructor(e,t,n={boundByScreen:!0}){this._drag=null,this._canBeTouchClick=!1,this._frame=null,this._onMouseDragStart=e=>{if(0!==e.button||this._isTargetNoDraggable(e))return;e.preventDefault(),document.addEventListener("mousemove",this._onMouseDragMove),document.addEventListener("mouseup",this._onMouseDragEnd);const t=p(m(e));this._dragStart(t)},this._onTouchDragStart=e=>{if(this._isTargetNoDraggable(e))return;this._canBeTouchClick=!0,e.preventDefault(),this._header.addEventListener("touchmove",this._onTouchDragMove,{passive:!1});const t=p(g(e));this._dragStart(t)},this._onMouseDragEnd=e=>{e.target instanceof Node&&this._header.contains(e.target)&&e.preventDefault(),document.removeEventListener("mousemove",this._onMouseDragMove),document.removeEventListener("mouseup",this._onMouseDragEnd),this._onDragStop()},this._onTouchDragEnd=e=>{this._header.removeEventListener("touchmove",this._onTouchDragMove),this._onDragStop(),this._canBeTouchClick&&(this._canBeTouchClick=!1,function(e){if(e instanceof SVGElement){const t=document.createEvent("SVGEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}e instanceof HTMLElement&&e.click()}(e.target))},this._onMouseDragMove=e=>{const t=p(m(e));this._dragMove(t)},this._onTouchDragMove=e=>{this._canBeTouchClick=!1,e.preventDefault();const t=p(g(e));this._dragMove(t)},this._onDragStop=()=>{this._drag=null,this._header.classList.remove("dragging"),this._options.onDragEnd&&this._options.onDragEnd()},this._dialog=e,this._header=t,this._options=n,this._header.addEventListener("mousedown",this._onMouseDragStart),this._header.addEventListener("touchstart",this._onTouchDragStart),this._header.addEventListener("touchend",this._onTouchDragEnd)}destroy(){null!==this._frame&&cancelAnimationFrame(this._frame),
this._header.removeEventListener("mousedown",this._onMouseDragStart),document.removeEventListener("mouseup",this._onMouseDragEnd),this._header.removeEventListener("touchstart",this._onTouchDragStart),this._header.removeEventListener("touchend",this._onTouchDragEnd),document.removeEventListener("mouseleave",this._onMouseDragEnd)}updateOptions(e){this._options=e}_dragStart(e){const t=this._dialog.getBoundingClientRect();this._drag={startX:e.x,startY:e.y,finishX:e.x,finishY:e.y,dialogX:t.left,dialogY:t.top};const n=Math.round(t.left),o=Math.round(t.top);this._dialog.style.transform=`translate(${n}px, ${o}px)`,this._header.classList.add("dragging"),this._options.onDragStart&&this._options.onDragStart()}_dragMove(e){if(this._drag){if(this._drag.finishX=e.x,this._drag.finishY=e.y,null!==this._frame)return;this._frame=requestAnimationFrame((()=>{if(this._drag){const t=e.x-this._drag.startX,n=e.y-this._drag.startY;this._moveDialog(this._drag.dialogX+t,this._drag.dialogY+n)}this._frame=null}))}}_moveDialog(e,t){const n=this._dialog.getBoundingClientRect(),{boundByScreen:o}=this._options,s=h(e,n.width,o?0:-1/0,o?window.innerWidth:1/0),i=h(t,n.height,o?0:-1/0,o?window.innerHeight:1/0);this._dialog.style.transform=`translate(${Math.round(s)}px, ${Math.round(i)}px)`}_isTargetNoDraggable(e){return e.target instanceof Element&&null!==e.target.closest("[data-disable-drag]")}}const f={vertical:0};var _,b=n(8361),y=n(910549),E=n(285089),w=n(671945),S=n(284170);!function(e){e.Open="dialog-open",e.Close="dialog-close",e.FullscreenOn="dialog-fullscreen-on",e.FullscreenOff="dialog-fullscreen-off"}(_||(_={}));const x=(0,w.getLogger)("DialogEventDispatcher");class C{constructor(){this._openSessionId=null}dispatch(e){if("dialog-open"===e){if(null!==this._openSessionId)return void x.logError("Multiple calls to open dialog");this._openSessionId=(0,S.randomHash)()}null!==this._openSessionId?(window.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{dialogSessionId:this._openSessionId}})),"dialog-close"===e&&(this._openSessionId=null)):x.logError("Empty open dialog session id")}}var M=n(69111),T=(n(534934),n(615617)),D=n(947156);D["tooltip-offset"];const O=class{constructor(e,t){this._frame=null,this._isFullscreen=!1,this._handleResize=()=>{null===this._frame&&(this._frame=requestAnimationFrame((()=>{this.recalculateBounds(),this._frame=null})))},this._dialog=e,this._guard=t.guard||f,this._calculateDialogPosition=t.calculateDialogPosition,this._initialHeight=e.style.height,window.addEventListener("resize",this._handleResize)}updateOptions(e){this._guard=e.guard||f,this._calculateDialogPosition=e.calculateDialogPosition}setFullscreen(e){this._isFullscreen!==e&&(this._isFullscreen=e,this.recalculateBounds())}centerAndFit(){const{x:e,y:t}=this.getDialogsTopLeftCoordinates(),n=this._calcAvailableHeight(),o=this._calcDialogHeight();if(n===o)if(this._calculateDialogPosition){const{left:e,top:t}=this._calculateDialogPosition(this._dialog,document.documentElement,this._guard)
;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else this._dialog.style.height=o+"px";this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${e}px, ${t}px)`}getDialogsTopLeftCoordinates(){const{clientWidth:e,clientHeight:t}=this._getClientDimensions(),n=this._calcDialogHeight(),o=e/2-this._dialog.clientWidth/2,s=t/2-n/2+this._getTopOffset();return{x:Math.round(o),y:Math.round(s)}}recalculateBounds(){const{clientWidth:e,clientHeight:t}=this._getClientDimensions(),{vertical:n}=this._guard,o=this._calculateDialogPosition?.(this._dialog,{clientWidth:e,clientHeight:t},{vertical:n});if(this._isFullscreen){if(this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.width="100%",this._dialog.style.height="100%",this._dialog.style.transform="none",o){const{left:e,top:t,width:n,height:s}=o;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`,n&&(this._dialog.style.width=`${n}px`,this._dialog.style.minWidth="unset"),s&&(this._dialog.style.height=`${s}px`,this._dialog.style.minHeight="unset")}}else if(o){const{left:e,top:t}=o;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else{this._dialog.style.width="",this._dialog.style.height="";const o=this._dialog.getBoundingClientRect(),s=t-2*n,i=h(o.left,o.width,0,e),r=h(o.top,o.height,n,t);this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${Math.round(i)}px, ${Math.round(r)}px)`,this._dialog.style.height=s<o.height?s+"px":this._initialHeight}}destroy(){window.removeEventListener("resize",this._handleResize),null!==this._frame&&(cancelAnimationFrame(this._frame),this._frame=null)}_getClientDimensions(){return{clientHeight:document.documentElement.clientHeight,clientWidth:document.documentElement.clientWidth}}_getTopOffset(){return 0}_calcDialogHeight(){const e=this._calcAvailableHeight();return e<this._dialog.clientHeight?e:this._dialog.clientHeight}_calcAvailableHeight(){return this._getClientDimensions().clientHeight-2*this._guard.vertical}};class N extends s.PureComponent{constructor(e){super(e),this._dialog=null,this._cleanUpFunctions=[],this._prevActiveElement=null,this._eventDispatcher=new C,this._handleDialogRef=e=>{const{reference:t}=this.props;this._dialog=e,"function"==typeof t?t(e):null!=t&&(t.current=e)},this._handleFocus=()=>{this._moveToTop()},this._handleMouseDown=e=>{this._moveToTop()},this._handleTouchStart=e=>{this._moveToTop()},this.state={canFitTooltip:!1},this._prevActiveElement=document.activeElement}render(){return s.createElement(y.PopupContext.Provider,{value:this},s.createElement(c.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this.props.onClickOutside},(e=>s.createElement("div",{ref:e,"data-outside-boundary-for":this.props.name,onFocus:this._handleFocus,onMouseDown:this._handleMouseDown,onTouchStart:this._handleTouchStart,"data-dialog-name":this.props["data-dialog-name"],"data-tooltip-show-on-focus":"true","data-qa-id":(0,
T.dataQaIds)("ui-lib-PopupDialog",this.props.dataQaId)},s.createElement(a.Dialog,{style:this._applyAnimationCSSVariables(),...this.props,reference:this._handleDialogRef,className:i(D.dialog,(0,M.isOnMobileAppPage)("any")&&!this.props.noMobileAppShadows&&D.mobile,this.props.fullscreen&&D.fullscreen,this.props.className)},!1,this.props.children)))))}componentDidMount(){const{draggable:e,boundByScreen:t,onDragStart:n}=this.props,o=(0,r.ensureNotNull)(this._dialog);if(this._eventDispatcher.dispatch("dialog-open"),e){const e=o.querySelector("[data-dragg-area]");if(e&&e instanceof HTMLElement){const s=new v(o,e,{boundByScreen:Boolean(t),onDragStart:n});this._cleanUpFunctions.push((()=>s.destroy())),this._drag=s}}this.props.autofocus&&!o.contains(document.activeElement)&&o.focus(),(this._isFullScreen()||this.props.fixedBody)&&(0,E.setFixedBodyState)(!0);const{guard:s,calculateDialogPosition:i}=this.props;if(this.props.resizeHandler)this._resize=this.props.resizeHandler;else{const e=new O(o,{guard:s,calculateDialogPosition:i});this._cleanUpFunctions.push((()=>e.destroy())),this._resize=e}if(this._isFullScreen()&&this._eventDispatcher.dispatch("dialog-fullscreen-on"),this.props.isAnimationEnabled&&this.props.growPoint&&this._applyAppearanceAnimation(this.props.growPoint),this.props.centeredOnMount&&this._resize.centerAndFit(),this._resize.setFullscreen(this._isFullScreen()),this.props.shouldForceFocus){if(this.props.onForceFocus)return void this.props.onForceFocus(o);o.focus()}if(!o.contains(document.activeElement)){const e=function(e){const t=e.querySelector("[autofocus]:not([disabled])");if(t)return t;if(e.tabIndex>=0)return e;const n=(0,d.getActiveElementSelectors)(),o=Array.from(e.querySelectorAll(n)).filter((0,d.createScopedVisibleElementFilter)(e));let s=Number.NEGATIVE_INFINITY,i=null;for(let e=0;e<o.length;e++){const t=o[e],n=t.getAttribute("tabindex");if(null!==n){const e=parseInt(n,10);!isNaN(e)&&e>s&&(s=e,i=t)}}return i}(o);e instanceof HTMLElement&&e.focus()}}componentDidUpdate(e){const t=e.fullscreen;if(this._resize){const{guard:e,calculateDialogPosition:t}=this.props;this._resize.updateOptions({guard:e,calculateDialogPosition:t}),this._resize.setFullscreen(this._isFullScreen())}if(this._drag&&this._drag.updateOptions({boundByScreen:Boolean(this.props.boundByScreen),onDragStart:this.props.onDragStart}),e.fullscreen!==this.props.fullscreen){const e=this.props.fullscreen;e&&!t?this._eventDispatcher.dispatch("dialog-fullscreen-on"):!e&&t&&this._eventDispatcher.dispatch("dialog-fullscreen-off")}}componentWillUnmount(){if(this.props.shouldReturnFocus&&this._prevActiveElement&&document.body.contains(this._prevActiveElement)&&(null===document.activeElement||document.activeElement===document.body||this._dialog?.contains(document.activeElement)))try{setTimeout((()=>{this._prevActiveElement.focus({preventScroll:!0})}))}catch{}for(const e of this._cleanUpFunctions)e();(this._isFullScreen()||this.props.fixedBody)&&(0,E.setFixedBodyState)(!1),this._isFullScreen()&&this._eventDispatcher.dispatch("dialog-fullscreen-off"),
this._eventDispatcher.dispatch("dialog-close")}focus(){this._dialog&&this._dialog.focus()}centerAndFit(){this._resize&&this._resize.centerAndFit()}recalculateBounds(){this._resize&&this._resize.recalculateBounds()}_moveToTop(){this.props.isZIndexFixed||null!==this.context&&this.context.moveToTop()}_applyAnimationCSSVariables(){return{"--animationTranslateStartX":null,"--animationTranslateStartY":null,"--animationTranslateEndX":null,"--animationTranslateEndY":null}}_applyAppearanceAnimation(e){if(this._resize&&this._dialog){const{x:t,y:n}=e,{x:o,y:s}=this._resize.getDialogsTopLeftCoordinates();this._dialog.style.setProperty("--animationTranslateStartX",`${t}px`),this._dialog.style.setProperty("--animationTranslateStartY",`${n}px`),this._dialog.style.setProperty("--animationTranslateEndX",`${o}px`),this._dialog.style.setProperty("--animationTranslateEndY",`${s}px`),this._dialog.classList.add(D.dialogAnimatedAppearance)}}_handleTooltipFit(){0}_isFullScreen(){return Boolean(this.props.fullscreen)}}N.contextType=b.PortalContext,N.defaultProps={boundByScreen:!0,draggable:!0,centeredOnMount:!0,shouldReturnFocus:!0};const R=(0,l.makeOverlapable)(N,!0)},522224:(e,t,n)=>{"use strict";n.d(t,{hoverMouseEventFilter:()=>o.hoverMouseEventFilter,useAccurateHover:()=>o.useAccurateHover,useHover:()=>o.useHover,useHoverDeprecated:()=>o.useHoverDeprecated});var o=n(975228)},930052:(e,t,n)=>{"use strict";n.d(t,{MatchMedia:()=>s});var o=n(50959);class s extends o.PureComponent{constructor(e){super(e),this._handleChange=()=>{this.forceUpdate()},this.state={query:window.matchMedia(this.props.rule)}}componentDidMount(){this._subscribe(this.state.query)}componentDidUpdate(e,t){this.state.query!==t.query&&(this._unsubscribe(t.query),this._subscribe(this.state.query))}componentWillUnmount(){this._unsubscribe(this.state.query)}render(){return this.props.children(this.state.query.matches)}static getDerivedStateFromProps(e,t){return e.rule!==t.query.media?{query:window.matchMedia(e.rule)}:null}_subscribe(e){e.addEventListener("change",this._handleChange)}_unsubscribe(e){e.removeEventListener("change",this._handleChange)}}},230553:(e,t,n)=>{"use strict";n.d(t,{MenuContext:()=>o});const o=n(50959).createContext(null)},510618:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_MENU_THEME:()=>v,Menu:()=>_});var o=n(50959),s=n(497754),i=n.n(s),r=n(650151),a=n(825850),l=n(157206),c=n(753327),u=n(370981),d=n(801808),h=n(926032),p=n(823030),m=n(230553),g=n(205808);const v=g;var f;!function(e){e[e.IndentFromWindow=0]="IndentFromWindow"}(f||(f={}));class _ extends o.PureComponent{constructor(e){super(e),this._containerRef=null,this._scrollWrapRef=null,this._raf=null,this._scrollRaf=null,this._scrollTimeout=void 0,this._manager=new d.OverlapManager,this._hotkeys=null,this._scroll=0,this._handleContainerRef=e=>{this._containerRef=e,this.props.reference&&("function"==typeof this.props.reference&&this.props.reference(e),"object"==typeof this.props.reference&&(this.props.reference.current=e))},this._handleScrollWrapRef=e=>{this._scrollWrapRef=e,
"function"==typeof this.props.scrollWrapReference&&this.props.scrollWrapReference(e),"object"==typeof this.props.scrollWrapReference&&(this.props.scrollWrapReference.current=e)},this._handleCustomRemeasureDelegate=()=>{this._resizeForced(),this._handleMeasure()},this._handleMeasure=({callback:e,forceRecalcPosition:t}={})=>{if(this.state.isMeasureValid&&!t)return;const{position:n}=this.props,o=(0,r.ensureNotNull)(this._containerRef);let s=o.getBoundingClientRect();const i=document.documentElement.clientHeight,l=document.documentElement.clientWidth,c=this.props.closeOnScrollOutsideOffset??0;let u=i-0-c;const d=s.height>u;if(d){(0,r.ensureNotNull)(this._scrollWrapRef).style.overflowY="scroll",s=o.getBoundingClientRect()}const{width:h,height:p}=s,m="function"==typeof n?n({contentWidth:h,contentHeight:p,availableWidth:l,availableHeight:i}):n,g=m?.indentFromWindow?.left??0,v=l-(m.overrideWidth??h)-(m?.indentFromWindow?.right??0),f=(0,a.clamp)(m.x,g,Math.max(g,v)),_=(m?.indentFromWindow?.top??0)+c,b=i-(m.overrideHeight??p)-(m?.indentFromWindow?.bottom??0);let y=(0,a.clamp)(m.y,_,Math.max(_,b));if(m.forbidCorrectYCoord&&y<m.y&&(u-=m.y-y,y=m.y),t&&void 0!==this.props.closeOnScrollOutsideOffset&&m.y<=this.props.closeOnScrollOutsideOffset)return void this._handleGlobalClose(!0);const E=m.overrideHeight??(d?u:void 0);this.setState({appearingMenuHeight:t?this.state.appearingMenuHeight:E,appearingMenuWidth:t?this.state.appearingMenuWidth:m.overrideWidth,appearingPosition:{x:f,y},isMeasureValid:!0},(()=>{this.props.doNotRestorePosition||this._restoreScrollPosition(),e&&e()}))},this._restoreScrollPosition=()=>{const e=document.activeElement,t=(0,r.ensureNotNull)(this._containerRef);if(null!==e&&t.contains(e))try{e.scrollIntoView()}catch(e){}else(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop=this._scroll},this._resizeForced=()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0})},this._resize=()=>{null===this._raf&&(this._raf=requestAnimationFrame((()=>{this.setState({appearingMenuHeight:void 0,appearingMenuWidth:void 0,appearingPosition:void 0,isMeasureValid:void 0}),this._raf=null})))},this._handleGlobalClose=e=>{this.props.onClose(e)},this._handleSlot=e=>{this._manager.setContainer(e)},this._handleScroll=()=>{this._scroll=(0,r.ensureNotNull)(this._scrollWrapRef).scrollTop},this._handleScrollOutsideEnd=()=>{clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((()=>{this._handleMeasure({forceRecalcPosition:!0})}),80)},this._handleScrollOutside=e=>{e.target!==this._scrollWrapRef&&(this._handleScrollOutsideEnd(),null===this._scrollRaf&&(this._scrollRaf=requestAnimationFrame((()=>{this._handleMeasure({forceRecalcPosition:!0}),this._scrollRaf=null}))))},this.state={}}componentDidMount(){this._handleMeasure({callback:this.props.onOpen});const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.subscribe(this,this._handleGlobalClose),t?.subscribe(null,this._handleCustomRemeasureDelegate),
window.addEventListener("resize",this._resize);const n=null!==this.context;this._hotkeys||n||(this._hotkeys=h.createGroup({desc:"Popup menu"}),this._hotkeys.add({desc:"Close",hotkey:27,handler:()=>{this.props.onKeyboardClose&&this.props.onKeyboardClose(),this._handleGlobalClose()}})),this.props.repositionOnScroll&&window.addEventListener("scroll",this._handleScrollOutside,{capture:!0})}componentDidUpdate(){this._handleMeasure()}componentWillUnmount(){const{customCloseDelegate:e=u.globalCloseDelegate,customRemeasureDelegate:t}=this.props;e.unsubscribe(this,this._handleGlobalClose),t?.unsubscribe(null,this._handleCustomRemeasureDelegate),window.removeEventListener("resize",this._resize),window.removeEventListener("scroll",this._handleScrollOutside,{capture:!0}),this._hotkeys&&(this._hotkeys.destroy(),this._hotkeys=null),null!==this._raf&&(cancelAnimationFrame(this._raf),this._raf=null),null!==this._scrollRaf&&(cancelAnimationFrame(this._scrollRaf),this._scrollRaf=null),this._scrollTimeout&&clearTimeout(this._scrollTimeout)}render(){const{id:e,role:t,"aria-label":n,"aria-labelledby":s,"aria-activedescendant":r,"aria-hidden":a,"aria-describedby":u,"aria-invalid":d,children:h,minWidth:v,theme:f=g,className:_,maxHeight:y,onMouseOver:E,onMouseOut:w,onKeyDown:S,onFocus:x,onBlur:C}=this.props,{appearingMenuHeight:M,appearingMenuWidth:T,appearingPosition:D,isMeasureValid:O}=this.state,N={"--ui-kit-menu-max-width":`${D&&D.x}px`,maxWidth:"calc(100vw - var(--ui-kit-menu-max-width) - 6px)"};return o.createElement(m.MenuContext.Provider,{value:this},o.createElement(p.SubmenuHandler,null,o.createElement(c.SlotContext.Provider,{value:this._manager},o.createElement("div",{id:e,role:t,"aria-label":n,"aria-labelledby":s,"aria-activedescendant":r,"aria-hidden":a,"aria-describedby":u,"aria-invalid":d,className:i()(_,f.menuWrap,!O&&f.isMeasuring),style:{height:M,left:D&&D.x,minWidth:v,position:"fixed",top:D&&D.y,width:T,...this.props.limitMaxWidth&&N},"data-name":this.props["data-name"],"data-qa-id":this.props.dataQaId,"data-tooltip-show-on-focus":this.props["data-tooltip-show-on-focus"],ref:this._handleContainerRef,onScrollCapture:this.props.onScroll,onContextMenu:l.preventDefaultForContextMenu,tabIndex:this.props.tabIndex,onMouseOver:E,onMouseOut:w,onKeyDown:S,onFocus:x,onBlur:C},o.createElement("div",{className:i()(f.scrollWrap,!this.props.noMomentumBasedScroll&&f.momentumBased),style:{overflowY:void 0!==M?"scroll":"auto",maxHeight:y},onScrollCapture:this._handleScroll,ref:this._handleScrollWrapRef},o.createElement(b,{className:f.menuBox},h)))),o.createElement(c.Slot,{reference:this._handleSlot})))}update(e){e?this._resizeForced():this._resize()}focus(e){this._containerRef?.focus(e)}blur(){this._containerRef?.blur()}}function b(e){const t=(0,r.ensureNotNull)((0,o.useContext)(p.SubmenuContext)),n=o.useRef(null);return o.createElement("div",{ref:n,className:e.className,onMouseOver:function(e){if(!(null!==t.current&&e.target instanceof Node&&(o=e.target,n.current?.contains(o))))return;var o;t.isSubmenuNode(e.target)||t.setCurrent(null)},
"data-name":"menu-inner","data-qa-id":"menu-inner"},e.children)}_.contextType=p.SubmenuContext},494707:(e,t,n)=>{"use strict";n.d(t,{Separator:()=>r});var o=n(50959),s=n(497754),i=n(315015);function r(e){return o.createElement("div",{className:s(i.separator,e.className)})}},874485:(e,t,n)=>{"use strict";n.d(t,{makeOverlapable:()=>i});var o=n(50959),s=n(8361);function i(e,t){return class extends o.PureComponent{render(){const{isOpened:n,root:i}=this.props;if(!n)return null;const r=o.createElement(e,{...this.props,ref:this.props.componentRef,zIndex:150});return"parent"===i?r:o.createElement(s.Portal,{shouldTrapFocus:t},r)}}}},28466:(e,t,n)=>{"use strict";n.d(t,{CloseDelegateContext:()=>i});var o=n(50959),s=n(370981);const i=o.createContext(s.globalCloseDelegate)},8361:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>o.Portal,PortalContext:()=>o.PortalContext});var o=n(730654)},753327:(e,t,n)=>{"use strict";n.d(t,{Slot:()=>o.Slot,SlotContext:()=>o.SlotContext});var o=n(682925)},904237:(e,t,n)=>{"use strict";var o=n(632227);t.createRoot=o.createRoot,o.hydrateRoot},377145:(e,t,n)=>{"use strict";function o(e,t){return e===t}n.d(t,{createSelector:()=>s});var s=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),s=0;s<t;s++)o[s]=arguments[s];var i=0,r=o.pop(),a=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(o),l=e.apply(void 0,[function(){return i++,r.apply(null,arguments)}].concat(n)),c=e((function(){for(var e=[],t=a.length,n=0;n<t;n++)e.push(a[n].apply(null,arguments));return l.apply(null,e)}));return c.resultFunc=r,c.dependencies=a,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=null,s=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!e(t[s],n[s]))return!1;return!0}(t,n,arguments)||(s=e.apply(null,arguments)),n=arguments,s}}))},699343:e=>{e.exports={button:"button-GwQQdU8S",pressed:"pressed-GwQQdU8S",hover:"hover-GwQQdU8S",clicked:"clicked-GwQQdU8S",isInteractive:"isInteractive-GwQQdU8S",accessible:"accessible-GwQQdU8S",isGrouped:"isGrouped-GwQQdU8S",isActive:"isActive-GwQQdU8S",isOpened:"isOpened-GwQQdU8S",isDisabled:"isDisabled-GwQQdU8S",text:"text-GwQQdU8S",icon:"icon-GwQQdU8S",endIcon:"endIcon-GwQQdU8S"}},738152:(e,t,n)=>{"use strict";var o;function s(e){e.dispatchEvent(new CustomEvent("roving-tabindex:main-element"))}function i(e){e.dispatchEvent(new CustomEvent("roving-tabindex:secondary-element"))}n.d(t,{becomeMainElement:()=>s,becomeSecondaryElement:()=>i}),function(e){e.MainElement="roving-tabindex:main-element",e.SecondaryElement="roving-tabindex:secondary-element"}(o||(o={}))},
795641:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_TOOL_WIDGET_BUTTON_THEME:()=>a,ToolWidgetButton:()=>l});var o=n(50959),s=n(497754),i=n(878112),r=n(699343);const a=r,l=o.forwardRef(((e,t)=>{const{tag:n="div",icon:a,endIcon:l,isActive:c,isOpened:u,isDisabled:d,isDisabledAppearance:h,isGrouped:p,isHovered:m,isClicked:g,onClick:v,text:f,textBeforeIcon:_,title:b,theme:y=r,className:E,forceInteractive:w,"data-name":S,"data-tooltip":x,tooltipPosition:C,children:M,isPressed:T,...D}=e,O=s(E,y.button,{"apply-common-tooltip":Boolean(b||x),"common-tooltip-vertical":Boolean(x)&&"vertical"===C,[y.isActive]:c,[y.isOpened]:u,[y.isInteractive]:(w||Boolean(v))&&!d&&!h,[y.isDisabled]:Boolean(d||h),[y.isGrouped]:p,[y.hover]:m,[y.clicked]:g,[y.pressed]:T}),N=a&&("string"==typeof a?o.createElement(i.Icon,{className:y.icon,icon:a}):o.cloneElement(a,{className:s(y.icon,a.props.className)}));return"button"===n?o.createElement("button",{...D,ref:t,type:"button",className:s(O,y.accessible),disabled:d&&!h,onClick:v,title:b,"data-name":S,"data-tooltip":x},_&&f&&o.createElement("div",{className:s("js-button-text",y.text)},f),N,!_&&f&&o.createElement("div",{className:s("js-button-text",y.text)},f),M):o.createElement("div",{...D,ref:t,"data-role":"button",className:O,onClick:d?void 0:v,title:b,"data-name":S,"data-tooltip":x},_&&f&&o.createElement("div",{className:s("js-button-text",y.text)},f),N,!_&&f&&o.createElement("div",{className:s("js-button-text",y.text)},f),l&&o.createElement(i.Icon,{icon:l,className:r.endIcon}),M)}))},589422:(e,t,n)=>{"use strict";n.d(t,{Toolbar:()=>d});var o=n(50959),s=n(650151),i=n(269842),r=n(930202),a=n(947278),l=n(738152),c=n(718736),u=n(132208);const d=(0,o.forwardRef)((function(e,t){const{onKeyDown:n,orientation:d,blurOnEscKeydown:h=!0,blurOnClick:p=!0,...m}=e,g=(0,c.useFunctionalRefObject)(t);return(0,o.useLayoutEffect)((()=>{const e=(0,s.ensureNotNull)(g.current),t=()=>{const t=(0,a.queryTabbableElements)(e).sort(a.navigationOrderComparator);if(0===t.length){const[t]=(0,a.queryFocusableElements)(e).sort(a.navigationOrderComparator);if(void 0===t)return;(0,l.becomeMainElement)(t)}if(t.length>1){const[,...e]=t;for(const t of e)(0,l.becomeSecondaryElement)(t)}};return window.addEventListener("keyboard-navigation-activation",t),()=>window.removeEventListener("keyboard-navigation-activation",t)}),[]),o.createElement("div",{...u.MouseClickAutoBlurHandler.attributes(p),...m,role:"toolbar","aria-orientation":d,ref:g,onKeyDown:(0,i.createSafeMulticastEventHandler)((function(e){if(e.defaultPrevented)return;if(!(document.activeElement instanceof HTMLElement))return;const t=(0,r.hashFromEvent)(e);if(h&&27===t)return e.preventDefault(),void document.activeElement.blur();if("vertical"!==d&&37!==t&&39!==t)return;if("vertical"===d&&38!==t&&40!==t)return;const n=e.currentTarget,o=(0,a.queryFocusableElements)(n).sort(a.navigationOrderComparator);if(0===o.length)return;const s=o.indexOf(document.activeElement);if(-1===s)return;e.preventDefault();const i=()=>{const e=(s+o.length-1)%o.length;(0,l.becomeSecondaryElement)(o[s]),(0,
l.becomeMainElement)(o[e]),o[e].focus()},c=()=>{const e=(s+o.length+1)%o.length;(0,l.becomeSecondaryElement)(o[s]),(0,l.becomeMainElement)(o[e]),o[e].focus()};switch((0,a.mapKeyCodeToDirection)(t)){case"inlinePrev":"vertical"!==d&&i();break;case"inlineNext":"vertical"!==d&&c();break;case"blockPrev":"vertical"===d&&i();break;case"blockNext":"vertical"===d&&c()}}),n),"data-tooltip-show-on-focus":"true"})}))},707986:(e,t,n)=>{"use strict";async function o(e,t,n){let o;for(let s=0;s<t;++s)try{return await e(o)}catch(e){o=e,await n(s)}throw o}async function s(e,t){return o(e,t,(()=>Promise.resolve()))}n.d(t,{getAllSourcesIcons:()=>d,loadAllSourcesIcons:()=>u});const i=(0,n(671945).getLogger)("DataSourcesIcons");let r=null;function a(){const e=n.c[740843];return e?Promise.resolve(e.exports.lineToolsIcons):n.e(1890).then(n.bind(n,740843)).then((e=>e.lineToolsIcons))}function l(){const e=n.c[866041];return e?Promise.resolve(e.exports.SERIES_ICONS):n.e(9685).then(n.bind(n,866041)).then((e=>e.SERIES_ICONS))}let c=null;function u(){return null===c&&(c=function(){const e=s(a,2).then((e=>e)).catch((e=>(i.logWarn(e),{}))),t=s(l,2).then((e=>e)).catch((e=>(i.logWarn(e),{})));return Promise.all([e,t])}()),c.then((e=>(r={linetool:e[0],series:e[1]},r)))}function d(){return r}},117105:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path stroke="currentColor" stroke-width="1.2" d="m1.5 1.5 21 21m0-21-21 21"/></svg>'},315130:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path stroke="currentColor" stroke-width="1.2" d="m1.5 1.5 15 15m0-15-15 15"/></svg>'},238822:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" width="14" height="14"><path stroke="currentColor" stroke-width="1.2" d="m1.5 1.5 11 11m0-11-11 11"/></svg>'},663346:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" width="12" height="12"><path stroke="currentColor" stroke-width="1.2" d="m1.5 1.5 9 9m0-9-9 9"/></svg>'},534983:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" width="10" height="10"><path stroke="currentColor" stroke-width="1.2" d="m1.5 1.5 7 7m0-7-7 7"/></svg>'},207809:(e,t,n)=>{"use strict";n.d(t,{TouchBackend:()=>m});var o,s=n(6346);!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(o||(o={}));class i{get delay(){var e;return null!==(e=this.args.delay)&&void 0!==e?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!==(e=this.args.ignoreContextMenu)&&void 0!==e&&e}get enableHoverOutsideTarget(){var e;return null!==(e=this.args.enableHoverOutsideTarget)&&void 0!==e&&e}get enableKeyboardEvents(){var e;return null!==(e=this.args.enableKeyboardEvents)&&void 0!==e&&e}get enableMouseEvents(){var e;return null!==(e=this.args.enableMouseEvents)&&void 0!==e&&e}get enableTouchEvents(){var e;return null===(e=this.args.enableTouchEvents)||void 0===e||e
}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,n,o;return null!==(o=null!==(n=null===(e=this.args)||void 0===e?void 0:e.delayTouchStart)&&void 0!==n?n:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==o?o:0}get delayMouseStart(){var e,t,n,o;return null!==(o=null!==(n=null===(e=this.args)||void 0===e?void 0:e.delayMouseStart)&&void 0!==n?n:null===(t=this.args)||void 0===t?void 0:t.delay)&&void 0!==o?o:0}get window(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.context)||void 0===e?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.args)||void 0===e?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}const r=1,a=0;function l(e){return void 0===e.button||e.button===a}function c(e){return!!e.targetTouches}function u(e,t){return c(e)?function(e,t){return 1===e.targetTouches.length?u(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?u(e.touches[0]):void 0}(e,t):{x:e.clientX,y:e.clientY}}const d=(()=>{let e=!1;try{addEventListener("test",(()=>{}),Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(e){}return e})(),h={[o.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[o.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[o.keyboard]:{keydown:"keydown"}};class p{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null===(e=this.dragOverTargetIds)||void 0===e?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&((0,s.invariant)(!p.isSetUp,"Cannot have two Touch backends at the same time."),p.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(p.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),
this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,n,o=!1){const s=d?{capture:o,passive:!1}:o;this.listenerTypes.forEach((function(o){const i=h[o][t];i&&e.addEventListener(i,n,s)}))}removeEventListener(e,t,n,o=!1){const s=d?{capture:o,passive:!1}:o;this.listenerTypes.forEach((function(o){const i=h[o][t];i&&e.removeEventListener(i,n,s)}))}connectDragSource(e,t){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",n)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const o=o=>{if(!this.document||!n||!this.monitor.isDragging())return;let s;switch(o.type){case h.mouse.move:s={x:o.clientX,y:o.clientY};break;case h.touch.move:var i,r;s={x:(null===(i=o.touches[0])||void 0===i?void 0:i.clientX)||0,y:(null===(r=o.touches[0])||void 0===r?void 0:r.clientY)||0}}const a=null!=s?this.document.elementFromPoint(s.x,s.y):void 0,l=a&&t.contains(a);return a===t||l?this.handleMove(o,e):void 0};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver((()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())})),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,n){this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&function(e){const t=1===e.nodeType?e:e.parentElement;if(!t)return;const{top:n,left:o}=t.getBoundingClientRect();return{x:o,y:n}}(t)},this.handleTopMoveStartCapture=e=>{l(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!l(e))return;const t=u(e);t&&(c(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{
if(!l(e))return;const t=e.type===h.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:t,dragOverTargetIds:n}=this,o=this.options.enableHoverOutsideTarget,s=u(e,this.lastTargetTouchFallback);if(!s)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,n,o,s){if(!s)return!1;const i=180*Math.atan2(o-t,n-e)/Math.PI+180;for(let e=0;e<s.length;++e){const t=s[e];if(t&&(null==t.start||i>=t.start)&&(null==t.end||i<=t.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,s.x,s.y,this.options.scrollAngleRanges))return void(this._isScrolling=!0);var i,r,a,l;if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&t&&(i=this._mouseClientOffset.x||0,r=this._mouseClientOffset.y||0,a=s.x,l=s.y,Math.sqrt(Math.pow(Math.abs(a-i),2)+Math.pow(Math.abs(l-r),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();const d=(n||[]).map((e=>this.targetNodes.get(e))).filter((e=>!!e)),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(s.x,s.y,d):this.document.elementsFromPoint(s.x,s.y),p=[];for(const e in h){if(!h.hasOwnProperty(e))continue;let t=h[e];for(null!=t&&p.push(t);t;)t=t.parentElement,t&&-1===p.indexOf(t)&&p.push(t)}const m=p.filter((e=>d.indexOf(e)>-1)).map((e=>this._getDropTargetId(e))).filter((e=>!!e)).filter(((e,t,n)=>n.indexOf(e)===t));if(o)for(const e in this.targetNodes){const t=this.targetNodes.get(e);if(c&&t&&t.contains(c)&&-1===m.indexOf(e)){m.unshift(e);break}}m.reverse(),this.actions.hover(m,{clientOffset:s})},this._getDropTargetId=e=>{const t=this.targetNodes.keys();let n=t.next();for(;!1===n.done;){const o=n.value;if(e===this.targetNodes.get(o))return o;n=t.next()}},this.handleTopMoveEndCapture=e=>{this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||!(e.buttons&r)}(e)&&(this.monitor.isDragging()&&!this.monitor.didDrop()?(e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()):this.moveStartSourceIds=void 0)},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new i(n,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),
this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(o.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(o.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(o.keyboard)}}const m=function(e,t={},n={}){return new p(e,t,n)}},365982:(e,t,n)=>{"use strict";n.d(t,{useDragLayer:()=>r});var o=n(50959),s=n(971690),i=n(868788);function r(e){const t=(0,i.useDragDropManager)().getMonitor(),[n,r]=(0,s.useCollector)(t,e);return(0,o.useEffect)((()=>t.subscribeToOffsetChange(r))),(0,o.useEffect)((()=>t.subscribeToStateChange(r))),n}}}]);