(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[6112],{839391:e=>{"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,a=void 0,o=void 0,s=[];return function(){var i=function(e){return"function"==typeof e?e():e}(t),u=(new Date).getTime(),c=!r||u-r>i;r=u;for(var m=arguments.length,d=Array(m),g=0;g<m;g++)d[g]=arguments[g];if(c&&n.leading)return n.accumulate?Promise.resolve(e.call(this,[d])).then((function(e){return e[0]})):Promise.resolve(e.call.apply(e,[this].concat(d)));if(a?clearTimeout(o):a=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}(),s.push(d),o=setTimeout(l.bind(this),i),n.accumulate){var p=s.length-1;return a.promise.then((function(e){return e[p]}))}return a.promise};function l(){var t=a;clearTimeout(o),Promise.resolve(n.accumulate?e.call(this,s):e.apply(this,s[s.length-1])).then(t.resolve,t.reject),s=[],a=null}}},831316:e=>{e.exports={tag:"tag-E35yqcCX",disabled:"disabled-E35yqcCX",animated:"animated-E35yqcCX"}},356983:e=>{e.exports={tags:"tags-nNSIFYl1",tag:"tag-nNSIFYl1",tagBuy:"tagBuy-nNSIFYl1",tagSell:"tagSell-nNSIFYl1"}},647393:e=>{e.exports={"tablet-small-breakpoint":"(max-width: 440px)",scrollable:"scrollable-NakQh3ob",content:"content-NakQh3ob",title:"title-NakQh3ob",label:"label-NakQh3ob",buttonsWrapper:"buttonsWrapper-NakQh3ob",button:"button-NakQh3ob",previewMessage:"previewMessage-NakQh3ob",warnings:"warnings-NakQh3ob",leverageInput:"leverageInput-NakQh3ob"}},906991:(e,t,n)=>{"use strict";n.d(t,{CreateConfirmDialog:()=>s});var r=n(50959),a=n(997776);const o=r.lazy((async()=>({default:(await Promise.all([n.e(7172),n.e(8894),n.e(5743),n.e(4495),n.e(9487),n.e(9323),n.e(159),n.e(683),n.e(1144),n.e(775),n.e(9658),n.e(7882),n.e(4952),n.e(5789),n.e(3905),n.e(3566)]).then(n.bind(n,976669))).AdaptiveConfirmDialog}))),s=(0,a.withDialogLazyLoad)(o)},555145:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LeverageDialog:()=>D});var r=n(609838),a=n(50959),o=n(960521),s=n.n(o),l=n(147167),i=n(252130),u=n(839391),c=n.n(u),m=n(497754),d=n.n(m),g=n(742554),p=n(463039),v=n(587125),f=n(906991),b=n(831316),h=n.n(b);function N(e){const{className:t,...n}=e;return a.createElement("span",{...n,className:d()(t,h().tag,h().disabled)})}var w=n(356983);const y={1:r.t(null,void 0,n(790258)),2:r.t(null,{context:"trading"},n(105593)),3:r.t(null,{context:"trading"},n(920902)),4:r.t(null,void 0,n(264073))};function x(e){const{side:t,orderType:o,customFields:s}=e,l=[{text:1===t?r.t(null,void 0,n(169961)):r.t(null,void 0,n(168222)),className:1===t?w.tagBuy:w.tagSell},{text:y[o]}];return void 0!==s&&Object.values(s).filter((e=>"string"==typeof e)).map((e=>l.push({text:e}))),a.createElement("div",{className:w.tags},l.map((e=>a.createElement(N,{key:e.text,className:d()(w.tag,e.className)},e.text))))}var E=n(17076);function S(e,t){return s()(e).div(t).round(0,s().roundDown).mul(t)}function C(e,t,n){const r=S(e,5);if(r.gt(0)&&r.minus(t).mod(n).eq(0))return r}
function k(e,t,n){const r=t.eq(n),a=r?0:t;return S(r?e:e.minus(t),n).plus(a)}function M(e,t,n){return e.plus(s()(n).mul(t))}function T(e){if(e.min>=e.max)return[];const t=new(s())(e.min),n=new(s())(e.max),r=new(s())(e.step),a=function(e,t){return e.gt(1)||t.lt(1)?e:s()(1)}(t,n),o=function(e,t,n){const r=t.minus(e).div(n);return r.gte(4)?3:r.round(0,s().roundDown).minus(1).toNumber()}(t,n,r),l=function(e,t,n){return t.minus(e).div(n+1)}(t,n,o),i=[a.toNumber()];for(let e=1;e<=o;e++){const o=M(a,l,e);let s=C(o,t,r);if((void 0===s||s.eq(i[e-1]))&&(s=k(o,t,r)),!s.eq(i[e-1])){if(s.gte(n))break;i.push(s.toNumber())}}return i.push(e.max),i}var F=n(932473),I=n(647393);function D(e){const{isOpen:t,onClose:s,leverage:u,title:m,symbol:b,displaySymbol:h,brokerName:N,min:w,max:y,step:S,side:C,orderType:k,infos:M,warnings:D,errors:B,customFields:O,onLeverageSet:Q,onLeveragePreview:q,onSetLeverageValueInOrderWidget:P}=e,j=(0,a.useCallback)(c()(function(){let e;return async t=>{let n;const r=e=q(te(t));try{n=await r}catch(e){n={errors:[(0,E.getErrorMessage)(e)]}}e===r&&R.current&&K(n)}}(),300),[]),[A,W]=(0,a.useState)(u),[Y,V]=(0,a.useState)(!1),[X,$]=(0,a.useState)(!1),[z,H]=(0,a.useState)(),[U,G]=(0,a.useState)(),[J,K]=(0,a.useState)({infos:M,warnings:D,errors:B}),R=(0,i.useIsMounted)();(0,a.useEffect)((()=>{let e;const t=new o.Big(A).minus(w).mod(S);void 0!==J.errors&&J.errors.length>0?e=J.errors.join(". "):Y?e=void 0:t.eq(0)||(e=r.t(null,{replace:{step:String(S)}},n(568556))),$(L(J.errors)||Y||void 0!==e),H(e),G(void 0)}),[Y,A,S,w,J]),(0,a.useEffect)((()=>{j(A)}),[A,j]),(0,a.useEffect)((()=>{W(u)}),[u]);const Z=(0,a.useMemo)((()=>m.charAt(0).toUpperCase()+m.substring(1).toLocaleLowerCase()),[m]),_=(0,a.useMemo)((()=>T({min:w,max:y,step:S})),[y,w,S]),ee=(0,a.useMemo)((()=>new F.PriceFormatter({priceScale:Math.pow(10,(0,l.numOfDecimalPlaces)(S)),ignoreLocaleNumberFormat:!0})),[S]);return a.createElement(f.CreateConfirmDialog,{isOpen:t,isOpened:t,submitButtonDisabled:X,render:function(){return a.createElement(g.TouchScrollContainer,null,a.createElement("div",{className:I.content},a.createElement("div",{className:I.title},`${h}, ${N}`),a.createElement(x,{side:C,orderType:k,customFields:O}),a.createElement(p.Label,{htmlFor:"leverageInput",className:I.label},r.t(null,void 0,n(824813))),a.createElement(v.NumberInput,{id:"leverageInput",value:A,min:w,max:y,step:S,roundByStep:!1,error:X||Boolean(U),errorMessage:z||U,boundariesErrorMessages:{greaterThanMax:r.t(null,{replace:{max:String(y)}},n(402517)),lessThanMin:r.t(null,{replace:{min:String(w)}},n(432381))},errorHandler:re,onValueChange:ne,stretch:!0,className:I.leverageInput,formatter:ee,shouldApplyValueOnFormatterChange:!0}),a.createElement("div",{className:I.buttonsWrapper},_.map((e=>a.createElement("button",{type:"button",className:I.button,key:e,onClick:()=>{ne(e)}},`x${e}`)))),L(J.infos)&&a.createElement("div",{className:I.previewMessage},J.infos?.join(". ")),L(J.warnings)&&a.createElement("div",{className:d()(I.previewMessage,I.warnings)},J.warnings?.join(". "))))},title:Z,
dataName:"trading-leverage-dialog",submitButtonText:r.t(null,void 0,n(874115)),cancelButtonText:r.t(null,void 0,n(904543)),onSubmit:async function(){try{await Q(te(A)),P(A),s()}catch(e){G((0,E.getErrorMessage)(e))}},onCancel:()=>{},onClose:s,defaultActionOnClose:"cancel",onClickOutside:s});function te(e){return{side:C,symbol:b,leverage:e,customFields:O,orderType:k}}function ne(e){W(e)}function re(e){V(e)}}function L(e){return void 0!==e&&e.length>0}}}]);